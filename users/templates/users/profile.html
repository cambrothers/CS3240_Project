{% load crispy_forms_tags %}
{% block content %}
{% load cloudinary %}

    <div class="content-section">
      <div class="media">
       
         <div class="media-body">
           
          <h2 class="account-heading">{{ user.username }}</h2>
          <p class="text-secondary">{{ user.email }}</p>
        </div>
      </div>
      <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          <fieldset class="form-group">
              <legend class="border-bottom mb-4">Profile Info</legend>
              {{ u_form|crispy }}
              {{ up_form|crispy }}
          </fieldset>
          <div class="form-group">
              <button class="btn btn-outline-info" type="submit">Update</button>
          </div>
      </form>
      <p></p>
      <!--Campbell, 4.18.21 Testing to see if the friend function works-->
      <p>This is a test to appear before the friend function</p>
        {% for user in allusers %}
        {{user.name}}
        {% if user in current_profile.friends.all %}
        <h1>{{user}} <a href="/send_friend_request/{{user.id}}/">send friend request</a></h1>
        {% endif %}
        {% endfor %}
      <ul class='all_users'>
        {% for users in allusers %}
        {% if user not in request.user.friends.all != request.user %}
        <h1>{{user}} <a href="/send_friend_request/{{user.id}}/">send friend request</a></h1>
        {% endif %}
        {% endfor %}
      </ul>
      {% for friend_request in all_friend_requests %}
      <h1>{{friend_request.from_user}}
        <a href="/accept_friend_request/{{friend_request.id}}/">
          accept friend request</a>
      </h1>
        {% endfor %}
    </div>
    <a href="/">Click here to go back to the home page!</a>
    <p></p>
    <p>*** PLEASE NOTE - QUESTIONNAIRE CAN ONLY BE TAKEN ONCE AND YOUR PROFILE MUST BE UPDATED BEFORE TAKING IT!*** </p>
    <a href="/questionnaire">Click here to take the roommate finder questionnaire!</a>
    <p></p>
    <a href="{% url 'matches' %}">Click here view matches!</a>
   

{% endblock content %}